<div class="fanekena-container row g-0" style="height: calc(100vh - 64px);">
    
    <!-- LISTE GAUCHE -->
    <div id="fnk-panel-list" class="col-12 col-md-3 nav-saas-panel">
        <div class="nav-saas-header">
            <span class="nav-saas-title">Confessions</span>
            <button class="btn-icon-soft" onclick="handleFnkNavigation('NEW')" title="Nouveau texte"><i class="bi bi-plus-lg"></i></button>
        </div>
        <div id="fanekenaListContainer" class="nav-saas-list custom-scrollbar"></div>
    </div>

    <!-- EDITEUR DROIT FIXE -->
    <div id="fnk-panel-editor" class="col-12 col-md-9 fixed-panel-layout d-none d-md-flex" style="background: white;">
        
        <!-- Header Fixe -->
        <div class="fixed-panel-header px-4 pt-3 pb-2">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center flex-grow-1 me-3">
                    <button class="btn btn-link text-dark p-0 me-3 d-md-none" onclick="handleFnkNavigation('BACK_LIST')"><i class="bi bi-arrow-left fs-4"></i></button>
                    <span class="unsaved-dot" title="Modifications non enregistrées"></span>
                    <input type="text" id="editFnkTitre" class="form-control border-0 p-0 fs-4 fw-bold text-dark" placeholder="Titre..." style="background:transparent;" oninput="markFnkDirty()">
                </div>
                <div class="d-flex gap-2 align-items-center">
                    <input type="hidden" id="editFnkId"><input type="hidden" id="editFnkRow">
                    <div id="editorActions" class="d-none d-flex gap-2">
                        <button class="btn btn-sm btn-light border text-danger" onclick="deleteFanekena()"><i class="bi bi-trash"></i></button>
                        <button id="btnSaveFnk" class="btn btn-sm btn-primary-notion transition-all" onclick="saveFanekena()">Enregistrer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Corps Scrollable -->
        <div class="fixed-panel-body p-4 custom-scrollbar" id="fanekenaScrollArea">
            <div id="editorContent" class="d-none">
                <div class="row g-4">
                    <div class="col-md-6">
                        <label class="small fw-bold text-muted mb-2">MALGACHE</label>
                        <!-- CORRECTION ICI : Suppression du style inline + Ajout class auto-expand -->
                        <textarea id="editFnkMG" class="form-control doc-input bg-light p-3 auto-expand" placeholder="Texte malgache..." oninput="autoResize(this); markFnkDirty()"></textarea>
                    </div>
                    <div class="col-md-6">
                        <label class="small fw-bold text-muted mb-2">FRANÇAIS</label>
                        <!-- CORRECTION ICI : Suppression du style inline + Ajout class auto-expand -->
                        <textarea id="editFnkFR" class="form-control doc-input bg-light p-3 text-secondary auto-expand" placeholder="Texte français..." oninput="autoResize(this); markFnkDirty()"></textarea>
                    </div>
                </div>
                <!-- Espace vide en bas pour scroller confortablement -->
                <div style="height: 100px;"></div>
            </div>
            
            <div id="emptyStateFnk" class="h-100 d-flex align-items-center justify-content-center text-muted small fst-italic">
                <div class="text-center opacity-50"><i class="bi bi-journal-text display-4 mb-2 d-block"></i>Sélectionnez ou créez un texte à gauche.</div>
            </div>
        </div>
    </div>
</div>

<!-- MODALES -->
<div id="discardChangesModal" class="notion-dialog" style="display:none; width: 320px; padding: 20px;">
    <div class="mb-3">
        <h6 class="fw-bold m-0 text-dark">Modifications non enregistrées</h6>
        <p class="small text-muted mt-2 mb-0" style="line-height:1.4;">Vous avez des modifications en cours.</p>
    </div>
    <div class="d-flex justify-content-end gap-2">
        <button class="btn btn-sm btn-light border" onclick="cancelFnkNavigation()">Annuler</button>
        <button class="btn btn-sm btn-danger text-white" onclick="confirmFnkDiscard()">Quitter sans sauver</button>
    </div>
</div>
<div id="fnkOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.2); z-index:1090;" onclick="cancelFnkNavigation()"></div>